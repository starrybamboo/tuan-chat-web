# 技术设计: 空间首次进入默认打开首个房间

## 技术方案

### 核心技术
- React / React Router（可选参数路由）
- 本地存储（用户自定义 room 排序）

### 实现要点
- 修复 `setActiveRoomId(null)` 生成 `/chat/.../null` 的问题：当 `roomId` 为空时，不拼接 `/:roomId` 路径段。
- 默认选房逻辑使用自定义排序后的 `orderedRooms`，并延迟到排序结果就绪后执行。
- 将 URL 的 `roomId` 段为字符串 `null`（以及同类无效值）视为“缺失 roomId”，触发回填到首个房间。

## 安全与性能
- **安全:** 不引入外部输入拼接风险；仅在前端路由范围内调整
- **性能:** 增加少量条件判断与依赖，不影响请求量；避免空列表导致的无意义导航

## 测试与部署
- **测试:** 启动前端后，验证以下路径：
  - `/chat/<spaceId>` 首次进入 → 自动进入自定义排序首房间
  - `/chat/<spaceId>/null` → 自动回填为首房间
  - 已带 `/chat/<spaceId>/<roomId>` 不发生多余跳转
- **部署:** 前端构建发布即可
