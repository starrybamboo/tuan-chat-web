# 变更提案: Blocksuite `@` 弹窗用户二级入口

## 需求背景

在空间资料/房间描述的 Blocksuite 编辑器中，输入 `@` 会打开 linked-doc widget 的候选弹窗。
当前弹窗同时展示“文档候选（Link to Doc）”与“用户/成员候选（Members）”。当空间成员较多时，用户列表占据视觉与滚动区域，导致选择具体文档变困难。

## 变更内容

1. `@` 弹窗优先展示文档候选列表（保持“Link to Doc”在前）。
2. 用户候选列表默认收起为二级入口，仅展示“展开用户列表”，需要时再展开查看/选择用户。

## 影响范围

- **模块:** blocksuite
- **文件:**
  - `app/components/chat/infra/blocksuite/embedded/createEmbeddedAffineEditor.client.ts`
- **API:** 无
- **数据:** 无

## 核心场景

### 需求: 文档选择不被用户列表干扰
**模块:** blocksuite
输入 `@` 触发 linked-doc popover 时，优先呈现文档候选，且无需在大量用户条目中滚动。

#### 场景: 输入 `@` 选择文档
- 条件：在 Blocksuite 文本输入区域输入 `@`
- 预期结果：
  - 文档候选组优先展示
  - 用户候选组仅展示一个“展开用户列表”的入口

### 需求: 仍可 `@` 用户
**模块:** blocksuite
需要提及成员时，用户可从二级入口进入用户列表并完成插入。

#### 场景: 展开用户列表并选择用户
- 条件：在 `@` 弹窗中点击“展开用户列表”
- 预期结果：
  - 展开后展示用户候选项
  - 选择用户后按 embed 规则插入 mention 节点，并关闭弹窗

## 风险评估

- **风险:** 通过 `maxDisplay` 的“overflow 展开”机制实现二级入口，依赖上游 linked-doc popover 的既有行为。
- **缓解:** 在实现处保留明确注释；如上游变更导致失效，可改为引入显式的“用户子菜单”自定义 popover（需要更大改动）。

