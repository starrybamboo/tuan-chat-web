# 变更历史索引

本文件记录所有已完成变更的索引，便于追溯和查询。

---

## 索引

| 时间戳 | 功能名称 | 类型 | 状态 | 方案包路径 |
|--------|----------|------|------|------------|

| 202601070338 | blocksuite_docs | 功能 | 已完成 | [2026-01/202601070338_blocksuite_docs/](2026-01/202601070338_blocksuite_docs/) |
| 202601070431 | blocksuite_docs_0_22_4 | 文档 | 已跳过 | [2026-01/202601070431_blocksuite_docs_0_22_4/](2026-01/202601070431_blocksuite_docs_0_22_4/) |
| 202601070539 | blocksuite_docs_0224 | 文档 | 已跳过 | [2026-01/202601070539_blocksuite_docs_0224/](2026-01/202601070539_blocksuite_docs_0224/) |
| 202601081220 | blocksuite_css_regression | 修复 | 已完成 | [2026-01/202601081220_blocksuite_css_regression/](2026-01/202601081220_blocksuite_css_regression/) |
| 202601082056 | blocksuite_strict_style_isolation | 修复 | 已完成（已废弃） | [2026-01/202601082056_blocksuite_strict_style_isolation/](2026-01/202601082056_blocksuite_strict_style_isolation/) |
| 202601082212 | blocksuite_style_isolation_official | 修复 | 已完成 | [2026-01/202601082212_blocksuite_style_isolation_official/](2026-01/202601082212_blocksuite_style_isolation_official/) |
| 202601082245 | blocksuite_iframe_isolation | 修复 | 已完成 | [2026-01/202601082245_blocksuite_iframe_isolation/](2026-01/202601082245_blocksuite_iframe_isolation/) |
| 202601110311 | blocksuite_ssr_doc_metas | 修复 | 已完成 | [2026-01/202601110311_blocksuite_ssr_doc_metas/](2026-01/202601110311_blocksuite_ssr_doc_metas/) |
| 202601110741 | blocksuite_ssr_safe_imports | 修复 | 已完成 | [2026-01/202601110741_blocksuite_ssr_safe_imports/](2026-01/202601110741_blocksuite_ssr_safe_imports/) |
| 202601111227 | webgal_realtime_create_game_no_template | 修复 | 已完成 | [2026-01/202601111227_webgal_realtime_create_game_no_template/](2026-01/202601111227_webgal_realtime_create_game_no_template/) |
| 202601111240 | webgal_settings_terre_port_indexeddb | 功能 | 已完成 | [2026-01/202601111240_webgal_settings_terre_port_indexeddb/](2026-01/202601111240_webgal_settings_terre_port_indexeddb/) |
| 202601131356 | ai_image | 功能 | 已完成 | [2026-01/202601131356_ai_image/](2026-01/202601131356_ai_image/) |
| 202601131515 | sidebar_tree_restore | 修复 | 已完成 | [2026-01/202601131515_sidebar_tree_restore/](2026-01/202601131515_sidebar_tree_restore/) |
| 202601131558 | create_tabs | 优化 | 已完成 | [2026-01/202601131558_create_tabs/](2026-01/202601131558_create_tabs/) |
| 202601131930 | blocksuite_doc_header_bar | 功能 | 已完成 | [2026-01/202601131930_blocksuite_doc_header_bar/](2026-01/202601131930_blocksuite_doc_header_bar/) |
| 202601140100 | sidebar_doc_style | 优化 | 已完成 | [2026-01/202601140100_sidebar_doc_style/](2026-01/202601140100_sidebar_doc_style/) |
| 202601140107 | quill_reference_audit | 文档 | 已完成 | [2026-01/202601140107_quill_reference_audit/](2026-01/202601140107_quill_reference_audit/) |
| 202601140226 | clue_doc_planA | 优化 | 已完成 | [2026-01/202601140226_clue_doc_planA/](2026-01/202601140226_clue_doc_planA/) |
| 202601140238 | webgal_space_vars | 功能 | 已完成 | [2026-01/202601140238_webgal_space_vars/](2026-01/202601140238_webgal_space_vars/) |
| 202601140247 | doc_meta_restore | 修复 | 已完成 | [2026-01/202601140247_doc_meta_restore/](2026-01/202601140247_doc_meta_restore/) |
| 202601140302 | clue_detail_ui_refactor | 优化 | 已完成 | [2026-01/202601140302_clue_detail_ui_refactor/](2026-01/202601140302_clue_detail_ui_refactor/) |
| 202601140410 | ai_image_novelapi_proxy | 功能 | 已完成 | [2026-01/202601140410_ai_image_novelapi_proxy/](2026-01/202601140410_ai_image_novelapi_proxy/) |
| 202601140425 | blocksuite_header_title_style | 优化 | 已完成 | [2026-01/202601140425_blocksuite_header_title_style/](2026-01/202601140425_blocksuite_header_title_style/) |
| 202601140543 | open-first-room | 修复 | 已完成 | [2026-01/202601140543_open-first-room/](2026-01/202601140543_open-first-room/) |
| 202601140558 | ai_image_ui_novelai | 优化 | 已完成 | [2026-01/202601140558_ai_image_ui_novelai/](2026-01/202601140558_ai_image_ui_novelai/) |
| 202601140604 | director_set_var | 优化 | 已完成 | [2026-01/202601140604_director_set_var/](2026-01/202601140604_director_set_var/) |
| 202601141319 | blocksuite_title_conflict_fix | 修复 | 已完成 | [2026-01/202601141319_blocksuite_title_conflict_fix/](2026-01/202601141319_blocksuite_title_conflict_fix/) |
| 202601141740 | lint_fix | 修复 | 已完成 | [2026-01/202601141740_lint_fix/](2026-01/202601141740_lint_fix/) |
| 202601141830 | blocksuite_doc_title_reset | 修复 | 已完成 | [2026-01/202601141830_blocksuite_doc_title_reset/](2026-01/202601141830_blocksuite_doc_title_reset/) |
| 202601141920 | ai_image_novelai | 功能 | 已完成（待确认） | [2026-01/202601141920_ai_image_novelai/](2026-01/202601141920_ai_image_novelai/) |
| 202601142115 | ai_image_dev_only | 优化 | 已完成 | [2026-01/202601142115_ai_image_dev_only/](2026-01/202601142115_ai_image_dev_only/) |
| 202601142140 | blocksuite_doc_title_optional_container | 修复 | 已完成 | [2026-01/202601142140_blocksuite_doc_title_optional_container/](2026-01/202601142140_blocksuite_doc_title_optional_container/) |
| 202601142246 | ai_image_meta_endpoint_fix | 修复 | 已完成 | [2026-01/202601142246_ai_image_meta_endpoint_fix/](2026-01/202601142246_ai_image_meta_endpoint_fix/) |
| 202601142250 | command_request_button | 功能 | 已完成 | [2026-01/202601142250_command_request_button/](2026-01/202601142250_command_request_button/) |
| 202601151614 | command_request_message_type | 功能 | 已完成 | [2026-01/202601151614_command_request_message_type/](2026-01/202601151614_command_request_message_type/) |
| 202601142337 | ai_image_proxy_env | 修复 | 已完成 | [2026-01/202601142337_ai_image_proxy_env/](2026-01/202601142337_ai_image_proxy_env/) |
| 202601151630 | ai_image_direct_fetch | 变更 | 已完成 | [2026-01/202601151630_ai_image_direct_fetch/](2026-01/202601151630_ai_image_direct_fetch/) |
| 202601151809 | ai_image_default_proxy | 变更 | 已完成 | [2026-01/202601151809_ai_image_default_proxy/](2026-01/202601151809_ai_image_default_proxy/) |
| 202601151716 | blocksuite_tc_header_mode_switch | 变更 | 已完成 | [2026-01/202601151716_blocksuite-tc-header-mode-switch/](2026-01/202601151716_blocksuite-tc-header-mode-switch/) |
| 202601161120 | novelai_nl_image_simple | 功能 | 已完成 | [2026-01/202601161120_novelai_nl_image_simple/](2026-01/202601161120_novelai_nl_image_simple/) |
| 202601171345 | blocksuite_mention_fix | 修复 | 已完成 | [2026-01/202601171345_blocksuite-mention-fix/](2026-01/202601171345_blocksuite-mention-fix/) |
| 202601171400 | blocksuite_canvas_inline | 优化 | 已完成 | [2026-01/202601171400_blocksuite-canvas-inline/](2026-01/202601171400_blocksuite-canvas-inline/) |
| 202601171414 | blocksuite_mention_fix2 | 修复 | 已完成 | [2026-01/202601171414_blocksuite-mention-fix2/](2026-01/202601171414_blocksuite-mention-fix2/) |
| 202601171430 | room_setting_height | 修复 | 已完成 | [2026-01/202601171430_room-setting-height/](2026-01/202601171430_room-setting-height/) |
| 202601171438 | blocksuite_mention_debug | 修复 | 已完成 | [2026-01/202601171438_blocksuite-mention-debug/](2026-01/202601171438_blocksuite-mention-debug/) |
| 202601171458 | novelai_model_lock_45_full | 变更 | 已完成 | [2026-01/202601171458_novelai_model_lock_45_full/](2026-01/202601171458_novelai_model_lock_45_full/) |
| 202601171622 | blocksuite_mention_click_debug | 修复 | 已完成（待确认） | [2026-01/202601171622_blocksuite-mention-click-debug/](2026-01/202601171622_blocksuite-mention-click-debug/) |
| 202601171640 | mention_tc_header_title | 修复 | 已完成 | [2026-01/202601171640_mention-tc-header-title/](2026-01/202601171640_mention-tc-header-title/) |
| 202601171657 | blocksuite_mention_host_click_debug | 修复 | 已完成（待确认） | [2026-01/202601171657_blocksuite-mention-host-click-debug/](2026-01/202601171657_blocksuite-mention-host-click-debug/) |
| 202601171723 | blocksuite_mention_enter_debug | 修复 | 已完成（待确认） | [2026-01/202601171723_blocksuite-mention-enter-debug/](2026-01/202601171723_blocksuite-mention-enter-debug/) |
| 202601171745 | blocksuite_mention_insert_fix | 修复 | 已完成（待确认） | [2026-01/202601171745_blocksuite-mention-insert-fix/](2026-01/202601171745_blocksuite-mention-insert-fix/) |
| 202601171831 | doc_sidebar_tc_header | 优化 | 已完成 | [2026-01/202601171831_doc_sidebar_tc_header/](2026-01/202601171831_doc_sidebar_tc_header/) |
| 202601171843 | blocksuite_kb_notes | 文档 | 已完成 | [2026-01/202601171843_blocksuite-kb-notes/](2026-01/202601171843_blocksuite-kb-notes/) |
| 202601171854 | ai_image_settings_modal | 优化 | 已完成 | [2026-01/202601171854_ai_image_settings_modal/](2026-01/202601171854_ai_image_settings_modal/) |
| 202601171905 | project_kb_expand | 文档 | 已完成 | [2026-01/202601171905_project_kb_expand/](2026-01/202601171905_project_kb_expand/) |
| 202601171911 | tc_header_no_reload | 修复 | 已完成 | [2026-01/202601171911_tc_header_no_reload/](2026-01/202601171911_tc_header_no_reload/) |
| 202601171932 | novelapi_proxy_stream_fix | 修复 | 已完成 | [2026-01/202601171932_novelapi_proxy_stream_fix/](2026-01/202601171932_novelapi_proxy_stream_fix/) |
| 202601172026 | ai_image_v4_params | 修复 | 已完成 | [2026-01/202601172026_ai_image_v4_params/](2026-01/202601172026_ai_image_v4_params/) |
| 202601172100 | ai_image_char_bg_layout | 变更 | 已完成 | [2026-01/202601172100_ai_image_char_bg_layout/](2026-01/202601172100_ai_image_char_bg_layout/) |
| 202601172234 | tc_header_upload_and_doc_lazy | 修复 | 已完成 | [2026-01/202601172234_tc_header_upload_and_doc_lazy/](2026-01/202601172234_tc_header_upload_and_doc_lazy/) |
| 202601192104 | merge_rerere | 变更 | 已完成 | [2026-01/202601192104_merge-rerere/](2026-01/202601192104_merge-rerere/) |

---

## 按月归档

### 2026-01

- [202601192104_merge-rerere](2026-01/202601192104_merge-rerere/) - 合并冲突自动解决与rerere启用
- [202601070338_blocksuite_docs](2026-01/202601070338_blocksuite_docs/) - Blocksuite 依赖文档补全（0.22.4）
- [202601070431_blocksuite_docs_0_22_4](2026-01/202601070431_blocksuite_docs_0_22_4/) - Blocksuite 0.22.4 文档方案（未执行归档：已由 blocksuite_docs 覆盖）
- [202601070539_blocksuite_docs_0224](2026-01/202601070539_blocksuite_docs_0224/) - Blocksuite 0.22.4 文档方案（未执行归档：已由 blocksuite_docs 覆盖）
- [202601081220_blocksuite_css_regression](2026-01/202601081220_blocksuite_css_regression/) - BlockSuite CSS 回归修复（按需加载 + KaTeX 全局副作用隔离）
- [202601082056_blocksuite_strict_style_isolation](2026-01/202601082056_blocksuite_strict_style_isolation/) - BlockSuite 嵌入场景样式强隔离（已废弃：Shadow DOM 引发 Selection/Range 兼容性问题）
- [202601082212_blocksuite_style_isolation_official](2026-01/202601082212_blocksuite_style_isolation_official/) - BlockSuite 嵌入场景样式隔离（官方兼容：作用域样式注入 + 上游副作用补丁）
- [202601082245_blocksuite_iframe_isolation](2026-01/202601082245_blocksuite_iframe_isolation/) - BlockSuite 嵌入场景 iframe 强隔离（最稳）
- [202601110311_blocksuite_ssr_doc_metas](2026-01/202601110311_blocksuite_ssr_doc_metas/) - 修复 SSR 评估阶段静态引入 Blocksuite workspace 依赖链触发 `document is not defined`
- [202601110741_blocksuite_ssr_safe_imports](2026-01/202601110741_blocksuite_ssr_safe_imports/) - 修复 SSR 评估阶段静态引入 blocksuite runtime（deleteSpaceDoc 动态 import）
- [202601111227_webgal_realtime_create_game_no_template](2026-01/202601111227_webgal_realtime_create_game_no_template/) - WebGAL 实时渲染创建游戏不使用模板，创建失败直接返回失败
- [202601111240_webgal_settings_terre_port_indexeddb](2026-01/202601111240_webgal_settings_terre_port_indexeddb/) - WebGAL 实时预览支持配置 Terre 端口，设置改为 IndexedDB 持久化
- [202601131356_ai_image](2026-01/202601131356_ai_image/) - 新增 AI 生图测试页（Electron 代理 NovelAI）
- [202601131515_sidebar_tree_restore](2026-01/202601131515_sidebar_tree_restore/) - Chat sidebarTree 分类/重置/创建与文档路由对齐
- [202601131558_create_tabs](2026-01/202601131558_create_tabs/) - 分类“+”创建入口改为标签页式单弹窗
- [202601131930_blocksuite_doc_header_bar](2026-01/202601131930_blocksuite_doc_header_bar/) - Blocksuite 描述文档自定义“图片+标题”头部（tc_header）+ room/space 乐观显示
- [202601140100_sidebar_doc_style](2026-01/202601140100_sidebar_doc_style/) - sidebarTree 文档节点字号/图标对齐房间
- [202601140107_quill_reference_audit](2026-01/202601140107_quill_reference_audit/) - Quill 引用统计审计报告（待后续去 Quill 化）
- [202601140226_clue_doc_planA](2026-01/202601140226_clue_doc_planA/) - 线索（space_clue）文档化入口：正文改为 Blocksuite，移除 description/note 编辑入口
- [202601140238_webgal_space_vars](2026-01/202601140238_webgal_space_vars/) - WebGAL 空间变量系统：导演控制台设置变量 + WEBGAL_VAR 消息类型
- [202601140247_doc_meta_restore](2026-01/202601140247_doc_meta_restore/) - 修复文档刷新后侧边栏丢失/重置默认无效（基于 sidebarTree 回补 doc metas）
- [202601140302_clue_detail_ui_refactor](2026-01/202601140302_clue_detail_ui_refactor/) - 线索详情弹窗 UI 重构（全屏 + 顶部固定 + 大视口文档）
- [202601140410_ai_image_novelapi_proxy](2026-01/202601140410_ai_image_novelapi_proxy/) - AI 生图页接入 /api/novelapi 同源代理，新增 img2img 与本地历史/下载
- [202601140425_blocksuite_header_title_style](2026-01/202601140425_blocksuite_header_title_style/) - Blocksuite 描述文档 tcHeader 标题样式对齐原生 doc-title，并加固禁用内置标题逻辑
- [202601140543_open-first-room](2026-01/202601140543_open-first-room/) - 修复空间模式首次进入跳到 `/chat/<spaceId>/null`（按自定义排序进入首个房间）
- [202601140558_ai_image_ui_novelai](2026-01/202601140558_ai_image_ui_novelai/) - AI 生图页 UI 重构，对齐 NovelAI Image Generation（novelai.net/image）
- [202601140604_director_set_var](2026-01/202601140604_director_set_var/) - 导演控制台支持设置 WebGAL 空间变量（保留 `/var set ...` 快捷方式）
- [202601141319_blocksuite_title_conflict_fix](2026-01/202601141319_blocksuite_title_conflict_fix/) - 修复 tcHeader 与内置 doc-title 并存，并重写 tcHeader 标题样式以抵御 iframe 注入/重置影响
- [202601141740_lint_fix](2026-01/202601141740_lint_fix/) - 修复 ESLint 报错/告警（hooks deps / unused vars / 正则回溯 / node process）
- [202601141830_blocksuite_doc_title_reset](2026-01/202601141830_blocksuite_doc_title_reset/) - 修复 Blocksuite 双标题：加固禁用 doc-title（fragment）并提供内置标题重置按钮
- [202601141920_ai_image_novelai](2026-01/202601141920_ai_image_novelai/) - AI 生图页重写：运行时模型拉取（失败降级）+ 仅保留 IndexedDB 历史 + Electron clientsettings IPC
- [202601142115_ai_image_dev_only](2026-01/202601142115_ai_image_dev_only/) - AI 生图调试增强：token 本地持久化 + 路由仅开发环境可用
- [202601142140_blocksuite_doc_title_optional_container](2026-01/202601142140_blocksuite_doc_title_optional_container/) - 让 `<doc-title>` 不再固定插入：使用 tc-affine-editor-container 按需渲染
- [202601142246_ai_image_meta_endpoint_fix](2026-01/202601142246_ai_image_meta_endpoint_fix/) - 修复 AI 生图模型运行时拉取端点：`/user/*` 固定走 api.novelai.net
- [202601142250_command_request_button](2026-01/202601142250_command_request_button/) - 跑团检定请求按钮消息：KP 发送 `@All` 指令生成按钮，成员点击后以自身角色在原 thread 执行
- [202601151614_command_request_message_type](2026-01/202601151614_command_request_message_type/) - 检定请求升级为独立消息类型 `COMMAND_REQUEST(12)`（前后端一致）
- [202601142337_ai_image_proxy_env](2026-01/202601142337_ai_image_proxy_env/) - 修复 NovelAPI 同源代理连接超时 502：支持读取本机代理环境变量
- [202601151630_ai_image_direct_fetch](2026-01/202601151630_ai_image_direct_fetch/) - AI 生图 Web 端默认直连 NovelAI（Connection 可切换同源代理）
- [202601151809_ai_image_default_proxy](2026-01/202601151809_ai_image_default_proxy/) - AI 生图 Web 默认切回同源代理（并持久化请求方式）
- [202601151716_blocksuite-tc-header-mode-switch](2026-01/202601151716_blocksuite-tc-header-mode-switch/) - 空间资料 Blocksuite 画布切换入口收口到 tcHeader，并移除外部 mode 控制通道
- [202601161120_novelai_nl_image_simple](2026-01/202601161120_novelai_nl_image_simple/) - AI 生图 Simple：自然语言 → tags → 出图（可回填到高级面板）
- [202601171345_blocksuite-mention-fix](2026-01/202601171345_blocksuite-mention-fix/) - 修复 Blocksuite 空间描述 @ 提及重复插入与弹窗不关闭
- [202601171400_blocksuite-canvas-inline](2026-01/202601171400_blocksuite-canvas-inline/) - 画布切换改为非全屏：仅占据原文档区域
- [202601171414_blocksuite-mention-fix2](2026-01/202601171414_blocksuite-mention-fix2/) - 加固 Blocksuite 空间描述 @ 提及弹窗关闭与重复触发
- [202601171430_room-setting-height](2026-01/202601171430_room-setting-height/) - 房间资料页移除 `max-h-[80vh]` 限制，修复底部留白
- [202601171438_blocksuite-mention-debug](2026-01/202601171438_blocksuite-mention-debug/) - 增加 Blocksuite @ 提及调试日志
- [202601171458_novelai_model_lock_45_full](2026-01/202601171458_novelai_model_lock_45_full/) - AI 生图模型锁定为 NAI v4.5 Full（`nai-diffusion-4-5-full`）
- [202601171622_blocksuite-mention-click-debug](2026-01/202601171622_blocksuite-mention-click-debug/) - 增强 Blocksuite @ 提及点击链路调试：iframe 内捕获点击事件路径摘要
- [202601171640_mention-tc-header-title](2026-01/202601171640_mention-tc-header-title/) - `@`（Linked Doc）候选列表标题优先使用 `tc_header.title`
- [202601171657_blocksuite-mention-host-click-debug](2026-01/202601171657_blocksuite-mention-host-click-debug/) - 增强 Blocksuite @ 提及点击链路调试：宿主侧捕获 portal 到 iframe 外的点击事件路径摘要
- [202601171723_blocksuite-mention-enter-debug](2026-01/202601171723_blocksuite-mention-enter-debug/) - 增强 Blocksuite @ 提及键盘确认调试：Enter 时输出 activeElement/probe 信息
- [202601171745_blocksuite-mention-insert-fix](2026-01/202601171745_blocksuite-mention-insert-fix/) - 修复 Blocksuite 空间描述 @ 提及重复插入（成员提及插入链路）
- [202601171831_doc_sidebar_tc_header](2026-01/202601171831_doc_sidebar_tc_header/) - sidebarTree 独立文档启用 tcHeader（标题/封面）并在列表展示缩略图
- [202601171843_blocksuite-kb-notes](2026-01/202601171843_blocksuite-kb-notes/) - Blocksuite 豆知识沉淀：mention=embed、linked-doc popover、StrictMode 多次 mount 等
- [202601171854_ai_image_settings_modal](2026-01/202601171854_ai_image_settings_modal/) - AI 生图页连接设置弹窗化（右上角设置）
- [202601171905_project_kb_expand](2026-01/202601171905_project_kb_expand/) - 完善现有项目知识库：补齐 Chat/Blocksuite/WebGAL/AI 生图模块文档与本地开发工作流
- [202601171911_tc_header_no_reload](2026-01/202601171911_tc_header_no_reload/) - 修复编辑 tcHeader 导致 blocksuite iframe 反复重载
- [202601171932_novelapi_proxy_stream_fix](2026-01/202601171932_novelapi_proxy_stream_fix/) - 修复 `/api/novelapi/*` 同源代理偶发 500（流式转发 pipeline 化）
- [202601172026_ai_image_v4_params](2026-01/202601172026_ai_image_v4_params/) - 修复 NAI v4/v4.5 出图 500：对齐 `params_version=3` 与 `v4_prompt` 参数结构
- [202601172100_ai_image_char_bg_layout](2026-01/202601172100_ai_image_char_bg_layout/) - AI 生图支持 v4/v4.5 “背景/角色”分区（`char_captions`）并对齐普通/专业模式三栏布局
- [202601172234_tc_header_upload_and_doc_lazy](2026-01/202601172234_tc_header_upload_and_doc_lazy/) - 修复 tc_header 头像上传（iframe 裁剪弹窗）并优化空间文档懒加载（不全量 load / pull 不写回）
