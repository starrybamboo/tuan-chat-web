# 技术设计: WebGAL 实时渲染增量更新

## 技术方案
### 核心技术
- TypeScript
- WebGAL 实时渲染器

### 实现要点
- 在 `RealtimeRenderer` 中提供增量重排能力：基于 `messageLineMap` 与场景文本切片重建顺序，并更新行号映射。
- 增强消息行号记录，覆盖非文本消息（背景/音效/特效/变量/指令）。
- 在 `useRealtimeRender` 暴露增量 API，并在编排层识别顺序变化/设置变更触发增量更新。
- 增量失败时回退 `renderHistory` 全量渲染。

## 安全与性能
- **安全:** 不引入外部依赖与敏感信息处理。
- **性能:** 优先增量重排与局部重渲染，减少全量渲染频率。

## 测试与部署
- **测试:** 手动验证顺序变化与设置变更触发增量更新；失败时回退全量渲染。
- **部署:** 前端构建发布流程不变。
